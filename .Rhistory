renv::activate()
library(geosphere)
library(here)
library(hms)
library(janitor)
library(lubridate)
library(readxl)
library(tidyverse)
# load data
events <- read_excel(here("data", "02_interim", "TANGO_2_DATA_cleaned.xlsx"), sheet = "Events") %>%
clean_names(case = "lower_camel") %>%
select(!where(~ all(is.na(.))))  # remove empty columns
View(events)
warnings()
View(events)
names(events)
# clean events
events_cleaned <- events %>%
%>%
# clean events
events_cleaned <- events %>%
mutate(
timeStartUtc3 = as.POSIXct(timeStartUtc3 * 86400, origin="1970-01-01", tz="UTC"),
timeEndUtc3   = as.POSIXct(timeEndUtc3   * 86400, origin="1970-01-01", tz="UTC")
)
# load data
events <- read_excel(here("data", "02_interim", "TANGO_2_DATA_cleaned.xlsx"), sheet = "Events") %>%
clean_names(case = "lower_camel") %>%
select(!where(~ all(is.na(.))))  # remove empty columns
View(events)
# load data
events <- read_excel(here("data", "02_interim", "TANGO_2_DATA_cleaned.xlsx"), sheet = "Events") %>%
clean_names(case = "lower_camel") %>%
select(!where(~ all(is.na(.))))  # remove empty columns
View(events)
# clean events
events_clean <- events %>%
mutate(
eventDate = as_date(eventDate),
startTime = as_hms(startTime),
endTime = as_hms(endTime),
eventDuration = as.numeric(difftime(endTime, startTime, units = "mins")),
) %>%
filter(!is.na(eventType))  # remove rows with missing eventType
